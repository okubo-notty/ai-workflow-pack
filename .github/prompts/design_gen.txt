# 詳細設計生成プロンプト（PHP TODOアプリ用）

あなたはシニアシステムアーキテクトです。
requirements/ ディレクトリ内の要件定義を解析し、簡易的なTODOアプリをPHPで作成する前提で
以下の成果物を生成してください。

1. design/DETAIL.md
   - システム概要（簡単なTODO管理アプリ、ユーザー登録・タスク追加・完了管理）
   - アーキテクチャ構成図（文章表現可）
   - モジュール設計（ユーザー管理、タスク管理、DBアクセス、入力バリデーション）
   - データモデル定義（タスクテーブル、ユーザーテーブルなど）
   - API仕様（タスクCRUD、ユーザー登録・ログイン）
   - 例外処理設計（DB接続エラー、入力バリデーション失敗、権限エラーなどを網羅）
   - データ整合性保証方針（タスクの未登録状態、重複登録防止、外部キー制約）
   - ログ／監査設計（操作履歴、エラー記録、ログ出力方針）

2. requirements/Acceptance.feature
   - Gherkin形式で記述すること
   - 正常系・異常系を網羅すること
   - 例外処理とデータ整合性検証を必ず含めること
   - 例: タスク追加成功、重複タスク追加時の失敗、未登録ユーザーによる操作拒否

【重要制約】
- 出力は必ず design/DETAIL.md と requirements/Acceptance.feature を生成する前提で構造化すること
- 曖昧な設計は禁止
- 例外処理とデータ整合性を最優先すること
- 実装可能なレベルまで具体化すること
- 言語は PHP を使用すること
